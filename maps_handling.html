<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Handling datasets from and for Geopaparazzi &mdash; Geopaparazzi 4.4.0 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '4.4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <link rel="top" title="Geopaparazzi 4.4.0 documentation" href="index.html" />
    <link rel="next" title="Using form based notes" href="forms.html" />
    <link rel="prev" title="Supported datasets" href="maps.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="forms.html" title="Using form based notes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="maps.html" title="Supported datasets"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Geopaparazzi 4.4.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="handling-datasets-from-and-for-geopaparazzi">
<span id="datapreparation"></span><span id="index-0"></span><h1>Handling datasets from and for Geopaparazzi<a class="headerlink" href="#handling-datasets-from-and-for-geopaparazzi" title="Permalink to this headline">¶</a></h1>
<p>Several applications can be used to prepare and evaluate
datasets for Geopaparazzi. The current ones known are:</p>
<ul class="simple">
<li>STAGE</li>
<li>Spatialite GUI</li>
<li>GDAL</li>
<li>QGIS</li>
<li>GRASS</li>
</ul>
<div class="section" id="stage-0-7">
<span id="index-1"></span><h2>STAGE 0.7<a class="headerlink" href="#stage-0-7" title="Permalink to this headline">¶</a></h2>
<p>STAGE (Spatial Toolbox And Geoscripting Environment) is a standalone application
dedicated to spatial analyses.</p>
<p>Related to Geopaparazzi, it contains functionalities to:</p>
<ul class="simple">
<li>Create <strong>mbtiles</strong> files from raster and vector sources.</li>
<li>Export geopaparazzi projects (version 3 or 4) to <strong>shapefiles</strong>, notes, profiles, and other details.</li>
<li>Convert geopaparazzi projects from version 3 to version 4.</li>
</ul>
<div class="section" id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<p>STAGE can be <a class="reference external" href="http://git.io/stage_releases">downloaded from the github releases page</a></p>
<p>Steps:</p>
<ul class="simple">
<li>copy the zip file in a folder:</li>
</ul>
<blockquote>
<div><ul class="simple">
<li>stage_0.7_win64.zip for 64 bits windows operating systems</li>
<li>stage_0.7_win32.zip for 32 bits windows operating systems</li>
<li>stage_0.7_lin64.zip for 64 bits linux operating systems</li>
</ul>
</div></blockquote>
<ul class="simple">
<li>unzip the file in a folder</li>
<li>enter the unzipped folder</li>
<li>run the Stage application (ex. stage.exe for windows)</li>
</ul>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/01_stage.png"><img alt="_images/01_stage.png" src="_images/01_stage.png" style="width: 600px;" /></a>
</div>
<p>The <em>mobile</em> section contains modules related to Geopaparazzi.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/02_stage.png"><img alt="_images/02_stage.png" src="_images/02_stage.png" style="width: 600px;" /></a>
</div>
</div>
<div class="section" id="mbtiles-creation">
<span id="stagembtiles"></span><h3>MBTiles creation<a class="headerlink" href="#mbtiles-creation" title="Permalink to this headline">¶</a></h3>
<p>For the creation of an MBTiles file from a set of GIS data, as shapefiles
and tiff rasters, select the module: <strong>GeopaparazziMapsCreator</strong></p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/03_stage.png"><img alt="_images/03_stage.png" src="_images/03_stage.png" style="width: 600px;" /></a>
</div>
<p>The user will be able to add:</p>
<ul class="simple">
<li>up to 2 raster tiff or asc maps</li>
<li>up to 5 vector shapefiles</li>
<li>define the name of the new mbtiles dataset</li>
<li>define the minimum and maximum wanted zoomlevel (zoomlevels &gt; 18 start to take long time
to build because of the large number of tiles generated)</li>
<li>the image type to use:
- jpg: this should be used when photographic data are used (ex. aerial images)
- png: this should be used when images are used (ex. technical maps)</li>
<li>the output folder, inside which the database will be created</li>
</ul>
<p>Once the parameters are set, the module can be launched by pushing the
green <strong>play button</strong> in the top right toolbar.</p>
<p>In case of big data the user should consider to set the memory put
available to the run module. This is done in the lower left combobox
labeled <strong>Memory [MB]</strong>. The number to set is considered to be MegaBytes.
A safe value to use is a bit less than the amount of RAM available
on the computer.</p>
<p>For windows 32bit machines it is not possible to use more than 1000 MB due
to technical limitations of Java itself.</p>
</div>
<div class="section" id="converstion-of-geopaparazzi-data-to-gis-data">
<h3>Converstion of Geopaparazzi data to GIS data<a class="headerlink" href="#converstion-of-geopaparazzi-data-to-gis-data" title="Permalink to this headline">¶</a></h3>
<p>Through the module <strong>Geopaparazzi4Converter</strong> it is possible to export
data from a Geopaparazzi project database.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/04_stage.png"><img alt="_images/04_stage.png" src="_images/04_stage.png" style="width: 600px;" /></a>
</div>
<p>The only parameter to set are the input Geopaparazzi database path and the
output folder. It is also possible to toggle the creation of some of the data
contained in the database.</p>
<p>To run the module, refer to the <a class="reference internal" href="#stagembtiles"><span>mbtiles section</span></a>.</p>
<p>How are the data are exported from the Geopaparazzi database?
The following is created:</p>
<ul class="simple">
<li>point shapefiles for each type of note also complex forms</li>
<li>point shapefiles with reference to pictures taken and sketches</li>
<li>all pictures are exported to a media folder</li>
<li>line and points shapefiles for log lines and points</li>
<li>profile charts and csv of log data</li>
<li>a simple text project metadata file</li>
</ul>
<p>The exported data, viewed inside a GIS (in this case <a class="reference external" href="http://www.udig.eu">uDig</a>)
look like the following:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/12_udig.png"><img alt="_images/12_udig.png" src="_images/12_udig.png" style="width: 600px;" /></a>
</div>
</div>
</div>
<div class="section" id="spatialite-gui">
<span id="spatialitegui"></span><span id="index-2"></span><h2>Spatialite GUI<a class="headerlink" href="#spatialite-gui" title="Permalink to this headline">¶</a></h2>
<p>The Spatialite GUI can be used to create spatialite databases from shapefiles.</p>
<p>You can find the application on the spatialite homepage, at the time of writing
a good version for windows is version 1.7.1 available in <a class="reference external" href="http://www.gaia-gis.it/gaia-sins/windows-bin-amd64-prev/">this download
area</a>.</p>
<p>Open it and find yourself with:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/01_spl.png"><img alt="_images/01_spl.png" src="_images/01_spl.png" style="width: 600px;" /></a>
</div>
<p>We now create a new empty database in which to load the shapefile data:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/02_spl.png"><img alt="_images/02_spl.png" src="_images/02_spl.png" style="width: 600px;" /></a>
</div>
<p>You will be asked to save the database somewhere on disk. Once done,
you should find yourself with something like this, but with different path:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/03_spl.png"><img alt="_images/03_spl.png" src="_images/03_spl.png" style="width: 600px;" /></a>
</div>
<p>To then load a shapefil, locate the <em>Load Shapefile</em> icon:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/04_spl.png"><img alt="_images/04_spl.png" src="_images/04_spl.png" style="width: 600px;" /></a>
</div>
<p>In this example I will import a set of shapefiles from the <a class="reference external" href="http://www.naturalearthdata.com/">Natural
Earth dataset</a>, in particular the following ones:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/05_spl.png"><img alt="_images/05_spl.png" src="_images/05_spl.png" style="width: 600px;" /></a>
</div>
<p>that <a class="reference external" href="http://www.naturalearthdata.com/downloads/10m-cultural-vectors/">can be found here</a>.</p>
<p>The import dialog is the important one to fill the right way:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/06_spl.png"><img alt="_images/06_spl.png" src="_images/06_spl.png" style="width: 600px;" /></a>
</div>
<p>The really important things to take care of, are underlined in red:</p>
<ul class="simple">
<li>the SRID, i.e. the EPSG code of the data projection. If that one is not right, then you will not be able to see the data in geopaparazzi. Don&#8217;t even hope in miracles!</li>
<li>the Charset Encoding. Make sure to choose the right one. For example Japanese people might want to choose SHIFT_JIS if they want to see the labels rendered properly</li>
<li>force the creation of the spatial index</li>
</ul>
<p>If you then the push the ok button, you should find yourself with an ok message like this after the import:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/07_spl.png"><img alt="_images/07_spl.png" src="_images/07_spl.png" style="width: 600px;" /></a>
</div>
<p>You are almost there, one last step to go.</p>
<p>Right-click on the database name and select the <strong>Update Layer Statistics</strong> command.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/08_spl.png"><img alt="_images/08_spl.png" src="_images/08_spl.png" style="width: 600px;" /></a>
</div>
<p>Depending on the amount of data it should keep your harddisk working for a bit.
Don&#8217;t think it finished unless you see a result like the following:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/09_spl.png"><img alt="_images/09_spl.png" src="_images/09_spl.png" style="width: 600px;" /></a>
</div>
<p>Once this result appears to you, you are good to go.</p>
<p>Move the spatialite database to your device, fire up geopaparazzi and
go directly to the <a class="reference internal" href="mapview_menu.html#spatialitedatalist"><span>spatialite data view</span></a>.</p>
<p>You should see something like:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/10_spl.png"><img alt="_images/10_spl.png" src="_images/10_spl.png" style="width: 300px;" /></a>
</div>
<dl class="docutils">
<dt>Enable the countries and places layer, maybe also activate the labels</dt>
<dd>for the places layer:</dd>
</dl>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/11_spl.png"><img alt="_images/11_spl.png" src="_images/11_spl.png" style="width: 300px;" /></a>
</div>
</div>
<div class="section" id="gdal">
<span id="index-3"></span><h2>GDAL<a class="headerlink" href="#gdal" title="Permalink to this headline">¶</a></h2>
<div class="section" id="creation-of-local-tiles-datasets">
<h3>Creation of local tiles datasets<a class="headerlink" href="#creation-of-local-tiles-datasets" title="Permalink to this headline">¶</a></h3>
<p>Geopaparazzi does not support reprojecting raster data sources on-the-fly, so the file
must be warped to the proper projection before using it. To do it you can use
<a class="reference external" href="http://www.gdal.org/gdalwarp.html">gdalwarp</a> command.</p>
<p>The target projection must be Google Web Mercator (EPSG code 3857); you must know
also the source projection of the raster you are converting. As an example, if
you have a WGS 84 projected (EPSG code 4326) input file, you will run this kind of command:</p>
<div class="highlight-python"><div class="highlight"><pre>gdalwarp -s_srs EPSG:4326 -t_srs EPSG:3857 -r bilinear input.tif output.tif
</pre></div>
</div>
<p>To create the tiles you can use <a class="reference external" href="http://www.gdal.org/gdal2tiles.html">gdal2tiles.py</a> script,
using as input your Google Web Mercator projected raster file:</p>
<div class="highlight-python"><div class="highlight"><pre>gdal2tiles.py output.tif
</pre></div>
</div>
<p>It generates directory with TMS tiles, that you can use in Geopaparazzi. In the
root of the this directory you will find &#8220;tilemapresource.xml&#8221; file
which contains all the information to build the .mapurl file:</p>
<div class="highlight-xml"><div class="highlight"><pre> <span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
 <span class="nt">&lt;TileMap</span> <span class="na">version=</span><span class="s">&quot;1.0.0&quot;</span> <span class="na">tilemapservice=</span><span class="s">&quot;http://tms.osgeo.org/1.0.0&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;Title&gt;</span>temp3.vrt<span class="nt">&lt;/Title&gt;</span>
   <span class="nt">&lt;Abstract&gt;&lt;/Abstract&gt;</span>
   <span class="nt">&lt;SRS&gt;</span>EPSG:900913<span class="nt">&lt;/SRS&gt;</span>
<span class="hll">   <span class="nt">&lt;BoundingBox</span> <span class="na">minx=</span><span class="s">&quot;46.39742402665929&quot;</span> <span class="na">miny=</span><span class="s">&quot;11.28858223249814&quot;</span> <span class="na">maxx=</span><span class="s">&quot;46.45081836101696&quot;</span> <span class="na">maxy=</span><span class="s">&quot;11.37616698902041&quot;</span><span class="nt">/&gt;</span>
</span><span class="hll">   <span class="nt">&lt;Origin</span> <span class="na">x=</span><span class="s">&quot;46.39742402665929&quot;</span> <span class="na">y=</span><span class="s">&quot;11.28858223249814&quot;</span><span class="nt">/&gt;</span>
</span>   <span class="nt">&lt;TileFormat</span> <span class="na">width=</span><span class="s">&quot;256&quot;</span> <span class="na">height=</span><span class="s">&quot;256&quot;</span> <span class="na">mime-type=</span><span class="s">&quot;image/png&quot;</span> <span class="na">extension=</span><span class="s">&quot;png&quot;</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;TileSets</span> <span class="na">profile=</span><span class="s">&quot;mercator&quot;</span><span class="nt">&gt;</span>
     <span class="nt">&lt;TileSet</span> <span class="na">href=</span><span class="s">&quot;12&quot;</span> <span class="na">units-per-pixel=</span><span class="s">&quot;38.21851413574219&quot;</span> <span class="na">order=</span><span class="s">&quot;12&quot;</span><span class="nt">/&gt;</span>
     <span class="nt">&lt;TileSet</span> <span class="na">href=</span><span class="s">&quot;13&quot;</span> <span class="na">units-per-pixel=</span><span class="s">&quot;19.10925706787109&quot;</span> <span class="na">order=</span><span class="s">&quot;13&quot;</span><span class="nt">/&gt;</span>
     <span class="nt">&lt;TileSet</span> <span class="na">href=</span><span class="s">&quot;14&quot;</span> <span class="na">units-per-pixel=</span><span class="s">&quot;9.55462853393555&quot;</span> <span class="na">order=</span><span class="s">&quot;14&quot;</span><span class="nt">/&gt;</span>
     <span class="nt">&lt;TileSet</span> <span class="na">href=</span><span class="s">&quot;15&quot;</span> <span class="na">units-per-pixel=</span><span class="s">&quot;4.77731426696777&quot;</span> <span class="na">order=</span><span class="s">&quot;15&quot;</span><span class="nt">/&gt;</span>
     <span class="nt">&lt;TileSet</span> <span class="na">href=</span><span class="s">&quot;16&quot;</span> <span class="na">units-per-pixel=</span><span class="s">&quot;2.38865713348389&quot;</span> <span class="na">order=</span><span class="s">&quot;16&quot;</span><span class="nt">/&gt;</span>
     <span class="nt">&lt;TileSet</span> <span class="na">href=</span><span class="s">&quot;17&quot;</span> <span class="na">units-per-pixel=</span><span class="s">&quot;1.19432856674194&quot;</span> <span class="na">order=</span><span class="s">&quot;17&quot;</span><span class="nt">/&gt;</span>
     <span class="nt">&lt;TileSet</span> <span class="na">href=</span><span class="s">&quot;18&quot;</span> <span class="na">units-per-pixel=</span><span class="s">&quot;0.59716428337097&quot;</span> <span class="na">order=</span><span class="s">&quot;18&quot;</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;/TileSets&gt;</span>
 <span class="nt">&lt;/TileMap&gt;</span>
</pre></div>
</div>
<p>Note that the <em>BoundingBox</em> and <em>Origin</em> values created by <em>gdal2tiles</em>
are have <strong>x</strong> and <strong>y</strong> values switched against how we need them:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">minx</span><span class="o">=</span><span class="s">&quot;11.28858223249814&quot;</span>
<span class="n">miny</span><span class="o">=</span><span class="s">&quot;46.39742402665929&quot;</span>
<span class="n">maxx</span><span class="o">=</span><span class="s">&quot;11.37616698902041&quot;</span>
<span class="n">maxy</span><span class="o">=</span><span class="s">&quot;46.45081836101696&quot;</span>
<span class="n">x</span><span class="o">=</span><span class="s">&quot;11.28858223249814&quot;</span>
<span class="n">y</span><span class="o">=</span><span class="s">&quot;46.39742402665929&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="creation-of-mbtiles-databases">
<h3>Creation of MBTiles databases<a class="headerlink" href="#creation-of-mbtiles-databases" title="Permalink to this headline">¶</a></h3>
<p>This section is looking for an author.</p>
</div>
</div>
<div class="section" id="qgis">
<span id="index-4"></span><h2>QGIS<a class="headerlink" href="#qgis" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-geopaparazzi-plugin">
<h3>The Geopaparazzi plugin<a class="headerlink" href="#the-geopaparazzi-plugin" title="Permalink to this headline">¶</a></h3>
<p>This section is looking for an author.</p>
</div>
</div>
<div class="section" id="grass">
<span id="index-5"></span><h2>GRASS<a class="headerlink" href="#grass" title="Permalink to this headline">¶</a></h2>
<div class="section" id="v-in-geopaparazzi">
<h3>v.in.geopaparazzi<a class="headerlink" href="#v-in-geopaparazzi" title="Permalink to this headline">¶</a></h3>
<p>This section is looking for an author.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/ic_launcher.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Handling datasets from and for Geopaparazzi</a><ul>
<li><a class="reference internal" href="#stage-0-7">STAGE 0.7</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#mbtiles-creation">MBTiles creation</a></li>
<li><a class="reference internal" href="#converstion-of-geopaparazzi-data-to-gis-data">Converstion of Geopaparazzi data to GIS data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#spatialite-gui">Spatialite GUI</a></li>
<li><a class="reference internal" href="#gdal">GDAL</a><ul>
<li><a class="reference internal" href="#creation-of-local-tiles-datasets">Creation of local tiles datasets</a></li>
<li><a class="reference internal" href="#creation-of-mbtiles-databases">Creation of MBTiles databases</a></li>
</ul>
</li>
<li><a class="reference internal" href="#qgis">QGIS</a><ul>
<li><a class="reference internal" href="#the-geopaparazzi-plugin">The Geopaparazzi plugin</a></li>
</ul>
</li>
<li><a class="reference internal" href="#grass">GRASS</a><ul>
<li><a class="reference internal" href="#v-in-geopaparazzi">v.in.geopaparazzi</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="maps.html"
                        title="previous chapter">Supported datasets</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="forms.html"
                        title="next chapter">Using form based notes</a></p>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="forms.html" title="Using form based notes"
             >next</a> |</li>
        <li class="right" >
          <a href="maps.html" title="Supported datasets"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Geopaparazzi 4.4.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, HydroloGIS S.r.l..
      Last updated on Jul 14, 2015.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>